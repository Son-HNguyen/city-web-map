<!--
  ~ City Web Map
  ~ http://www.3dcitydb.org/
  ~
  ~ Copyright 2015 - 2021
  ~ Chair of Geoinformatics
  ~ Department of Aerospace and Geodesy
  ~ Technical University of Munich, Germany
  ~ https://www.gis.lrg.tum.de/
  ~
  ~ Licensed under the Apache License, Version 2.0 (the "License");
  ~ you may not use this file except in compliance with the License.
  ~ You may obtain a copy of the License at
  ~
  ~    http://www.apache.org/licenses/LICENSE-2.0
  ~
  ~ Unless required by applicable law or agreed to in writing, software
  ~ distributed under the License is distributed on an "AS IS" BASIS,
  ~ WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
  ~ See the License for the specific language governing permissions and
  ~ limitations under the License.
  -->

<h2 mat-dialog-title>Add model layer</h2>
<mat-dialog-content class="mat-typography" [formGroup]="modelLayerForm">
  <h3>General information</h3>
  <div>
    <mat-form-field appearance="fill">
      <mat-label>Name of the layer</mat-label>
      <input matInput
             cdkFocusInitial
             value="{{name}}"
             placeholder="Example building models"
             formControlName="name"
             required>
      <mat-error *ngIf="modelLayerForm.controls.name.invalid">{{getNameErrorMessage()}}</mat-error>
    </mat-form-field>
  </div>
  <div>
    <mat-form-field appearance="fill">
      <mat-label>Select layer type</mat-label>
      <mat-select [(value)]="type"
                  formControlName="type"
                  required>
        <mat-option *ngFor="let layerType of types" [value]="layerType.value">
          {{layerType.viewValue}}
        </mat-option>
      </mat-select>
    </mat-form-field>
  </div>
  <div>
    <mat-form-field appearance="fill">
      <mat-label>URL to the visualization file(s)</mat-label>
      <input matInput
             value="{{url}}"
             placeholder="https://www.example.com/master.json"
             formControlName="url"
             required>
      <mat-error *ngIf="modelLayerForm.controls.url.invalid">{{getUrlErrorMessage()}}</mat-error>
    </mat-form-field>
  </div>
  <div>
    <mat-form-field appearance="fill">
      <mat-label>Tags (press ENTER or COMMA to separate, tags are (re)movable)</mat-label>
      <mat-chip-list #chipList
                     formControlName="tags"
                     cdkDropList
                     cdkDropListOrientation="horizontal"
                     (cdkDropListDropped)="dropTag($event)"
                     aria-label="Tags">
        <mat-chip *ngFor="let tag of tags"
                  cdkDrag
                  [selectable]="tagSelectable"
                  [removable]="tagRemovable"
                  (removed)="removeTag(tag)">
          {{tag}}
          <button matChipRemove *ngIf="tagRemovable">
            <mat-icon>cancel</mat-icon>
          </button>
        </mat-chip>
        <input placeholder="New tag..."
               [formControl]="tagInputControl"
               [matChipInputFor]="chipList"
               [matChipInputSeparatorKeyCodes]="tagSeparatorKeysCodes"
               [matChipInputAddOnBlur]="tagAddOnBlur"
               (matChipInputTokenEnd)="addTag($event)">
      </mat-chip-list>
      <mat-error *ngIf="modelLayerForm.controls.tags.invalid">{{getTagErrorMessage()}}</mat-error>
    </mat-form-field>
  </div>
  <div>
    <mat-form-field appearance="fill">
      <mat-label>Description</mat-label>
      <textarea matInput
                value="{{description}}"
                placeholder="Example layer description"
                formControlName="description"
                cdkTextareaAutosize
                cdkAutosizeMinRows="1"
                cdkAutosizeMaxRows="10"></textarea>
    </mat-form-field>
  </div>

  <mat-divider></mat-divider>

  <h3>Others</h3>

</mat-dialog-content>
<mat-dialog-actions align="end">
  <button mat-button (click)="onNoClick()">Cancel</button>
  <button mat-button (click)="onYesClick()" color="primary">ADD LAYER</button>
</mat-dialog-actions>
